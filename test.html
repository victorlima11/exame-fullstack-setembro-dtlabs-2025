<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste Socket.IO</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #111; color: #eee; }
    pre { background: #222; padding: 10px; border-radius: 5px; max-height: 400px; overflow-y: auto; }
  </style>
</head>
<body>
  <h1>Teste Socket.IO</h1>
  <p>Conectando ao servidor e entrando na sala do usu√°rio...</p>
  <pre id="log"></pre>

  <script>
    const log = msg => {
      const pre = document.getElementById("log");
      pre.textContent += msg + "\n";
    };

    const socket = io("ws://localhost:8080");

    socket.on("connect", () => {
      log(`‚úÖ Conectado: ${socket.id}`);

      const userId = "4acce917-4d67-4094-b4b2-12474f9928d9";
      socket.emit("join-user-room", userId);
      log(`üì• Entrou na sala do usu√°rio: ${userId}`);
    });

    socket.on("notification", data => {
      log("üîî Notifica√ß√£o recebida:");
      log(JSON.stringify(data, null, 2));
    });

    socket.on("disconnect", () => {
      log("‚ùå Desconectado");
    });

    socket.on("connect_error", (err) => {
      log("‚ö†Ô∏è Erro de conex√£o: " + err.message);
    });
  </script>
</body>
</html>
